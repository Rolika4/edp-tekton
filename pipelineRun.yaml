---
apiVersion: tekton.dev/v1beta1
kind: PipelineRun
metadata:
  name: java11-build
spec:
  taskRunSpecs:
    - pipelineTaskName: kaniko-build
      taskServiceAccountName: edp-kaniko
    - pipelineTaskName: get-edp-values
      taskServiceAccountName: jenkins
  pipelineRef:
    name: maven-java11-build
  workspaces:
    - name: maven-settings
      configMap:
        name: custom-maven-settings
    - name: shared-workspace
      volumeClaimTemplate:
        spec:
          accessModes:
            - ReadWriteOnce
          resources:
            requests:
              storage: 1Gi
      subPath: codebase
---
apiVersion: tekton.dev/v1beta1
kind: PipelineRun
metadata:
  name: java8-build
spec:
  taskRunSpecs:
    - pipelineTaskName: kaniko-build
      taskServiceAccountName: edp-kaniko
    - pipelineTaskName: get-edp-values
      taskServiceAccountName: jenkins
  pipelineRef:
    name: maven-java8-build
  workspaces:
    - name: maven-settings
      configMap:
        name: custom-maven-settings
    - name: shared-workspace
      volumeClaimTemplate:
        spec:
          accessModes:
            - ReadWriteOnce
          resources:
            requests:
              storage: 1Gi
      subPath: codebase
---
apiVersion: tekton.dev/v1beta1
kind: PipelineRun
metadata:
  name: java11-code-review
spec:
  pipelineRef:
    name: maven-java11-code-review
  workspaces:
    - name: maven-settings
      configMap:
        name: custom-maven-settings
    - name: shared-workspace
      volumeClaimTemplate:
        spec:
          accessModes:
            - ReadWriteOnce
          resources:
            requests:
              storage: 1Gi
      subPath: codebase
---
apiVersion: tekton.dev/v1beta1
kind: PipelineRun
metadata:
  name: java8-code-review
spec:
  pipelineRef:
    name: maven-java8-code-review
  workspaces:
    - name: maven-settings
      configMap:
        name: custom-maven-settings
    - name: shared-workspace
      volumeClaimTemplate:
        spec:
          accessModes:
            - ReadWriteOnce
          resources:
            requests:
              storage: 1Gi
      subPath: codebase

# We need to ensure that the following deployments are ready before we start testing
apiVersion: apps/v1
kind: Deployment
metadata:
  name: cert-manager
  namespace: cert-manager
status:
  readyReplicas: 1

---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: tekton-pipelines-controller
  namespace: tekton-pipelines
status:
  readyReplicas: 1

---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: tekton-pipelines-webhook
  namespace: tekton-pipelines
status:
  readyReplicas: 1

---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: tekton-triggers-controller
  namespace: tekton-pipelines
status:
  readyReplicas: 1

---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: tekton-triggers-webhook
  namespace: tekton-pipelines
status:
  readyReplicas: 1

---
apiVersion: tekton.dev/v1
kind: PipelineRun
metadata:
  name: check-readiness
status:
  conditions:
    - message: 'Tasks Completed: 1 (Failed: 0, Cancelled 0), Skipped: 0'
      reason: Succeeded
      status: 'True'
      type: Succeeded
  pipelineSpec:
    tasks:
      - name: echo-good-morning
        taskSpec:
          metadata:
            labels:
              app: example
          steps:
            - computeResources: {}
              image: alpine:3.18.4
              name: echo
              script: |
                #!/usr/bin/env sh
                echo "I'm ok!"
